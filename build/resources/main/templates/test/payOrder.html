<!doctype html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
    <title>결제창 데모</title>

    <!-- jquery 는 파트너사에서 이용중인 jquery 버전으로 이용하셔도 됩니다. -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>
      $(document).ready(function () {
        $("#orderFormSubmit").on("click", function (event) {
          var fm = $("#orderForm")[0];
          fm.method = "POST";
          //controller url
          //orderConfirm 
          fm.action = "payOrderConfirm";
          fm.submit();
          event.preventDefault();
        });

        /*
         *  #pay_type: 결제수단
         *  #taxsave_view: 현금영수증 발행여부 view
         *  #card_ver_view: 카드 세부 결제방식 view
         */
        $("#pay_type").on("change", function (e) {
          e.preventDefault();

          var this_val = $(this).val();

          if (this_val == "card") {
            $("#taxsave_view").css("display", "none");
            $("#card_ver_view").css("display", "");
          } else {
            $("#taxsave_view").css("display", "");
            $("#card_ver_view").css("display", "none");
          }

          $("#card_ver").on("change", function () {
            if ($(this).val() == "01") {
              $('#pay_work option[value*="AUTH"]').prop("disabled", false);
            } else {
              $('#pay_work option[value*="AUTH"]').prop("disabled", true);
            }
          });
        });

        /* 
		 *	#simple_flag: 간편결제 여부
         *  #payer_authtype_view: 비밀번호 결제 인증방식 view
         */
        $("#simple_flag").on("change", function (e) {
          e.preventDefault();

          var this_val = $(this).val();

          if (this_val == "Y") {
            $("#payer_authtype_view").css("display", "");
          } else {
            $("#payer_authtype_view").css("display", "none");
          }
        });
      });
    </script>

    <style>
      body {
        font-size: 12px;
      }

      input {
        width: 300px;
        height: 20px;
        border: 1px solid gray;
      }

      select {
        height: 30px;
      }

      table {
        border: 1px solid #aaaaaa;
        text-align: center;
      }

      tr {
        height: 35px;
      }

      th {
        text-align: center;
        font-weight: bold;
        background-color: #ececec;
      }

      td {
        text-align: left;
        padding-left: 5px;
      }

      #subject,
      #parameter,
      #value {
        background-color: rgba(120, 82, 232, 0.2);
        font-size: 15px;
      }

      #orderFormSubmit {
        font-size: 12px;
        font-weight: bold;
        width: 100px;
        height: 30px;
        cursor: pointer;
      }
    </style>
</head>
<body>
    <form id="orderForm" name="orderForm" method="post" action="./payOrderConfirm">
        <h2>| 주문 정보 설정</h2>
        <table>
            <colgroup>
                <col style="width: 150px;">
                <col style="width: 150px;">
                <col style="width: 300px;">
            </colgroup>
            <tr>
                <th id="subject">
                    항목
                </th>
                <th id="parameter">
                    요청변수
                </th>
                <th id="value">
                    값
                </th>
            </tr>
            <tr>
                <th>
                    주문번호(공백시 payple에서 uniq key를 할당, 영문,숫자 가능, 주문번호 중복시 나중에 들어온 거래요청건은 거절.)
                </th>
                <th>
                    PCD_PAY_OID
                </th>
                <td>
                    <input type="text" name="pay_oid" id="pay_oid" value="">
                </td>
            </tr>
            <tr>
                <th>
                    파트너사 회원번호
                </th>
                <th>
                    PCD_PAYER_NO
                </th>
                <td>
                    <input type="text" name="payer_no" id="payer_no" th:value="${payer_no}">
                </td>
            </tr>
            <tr>
                <th>
                    결제고객 이름
                </th>
                <th>
                    PCD_PAYER_NAME
                </th>
                <td>
                    <input type="text" name="payer_name" id="payer_name" th:value="${payer_name}">
                </td>
            </tr>
            <tr>
                <th>
                    결제고객 휴대전화번호
                </th>
                <th>
                    PCD_PAYER_HP
                </th>
                <td>
                    <input type="text" name="payer_hp" id="payer_hp" th:value="${payer_hp}">
                </td>
            </tr>
            <tr>
                <th>
                    결제고객 이메일
                </th>
                <th>
                    PCD_PAYER_EMAIL
                </th>
                <td>
                    <input type="text" name="payer_email" id="payer_email" th:value="${payer_email}">
                </td>
            </tr>
            <tr>
                <th>
                    상품명
                </th>
                <th>
                    PCD_PAY_GOODS
                </th>
                <td>
                    <input type="text" name="pay_goods" id="pay_goods" th:value="${pay_goods}">
                </td>
            </tr>
            <tr>
                <th>
                    결제금액
                </th>
                <th>
                    PCD_PAY_TOTAL
                </th>
                <td>
                    <input type="text" name="pay_total" id="pay_total" th:value="${pay_total}">
                </td>
            </tr>
        </table>

        <h2>| 결제 정보 설정</h2>
        <table>
            <colgroup>
                <col style="width: 150px;">
                <col style="width: 150px;">
                <col style="width: 300px;">
            </colgroup>
            <tr>
                <th id="subject">
                    항목
                </th>
                <th id="parameter">
                    요청변수
                </th>
                <th id="value">
                    값
                </th>
            </tr>
            <tr>
                <th>
                    결제수단
                </th>
                <th>
                    PCD_PAY_TYPE
                </th>
                <td>
                    <span>
                        <select id="pay_type" name="pay_type">
                            <!-- <option value="transfer">계좌이체결제</option> -->
                            <option value="card">신용카드</option>
                        </select>
                    </span>
                    <span id="card_ver_view" style="display:none;">
                        <select id="card_ver" name="card_ver">
                            <option value="01">간편/정기(빌링키결제)</option><!-- pay 결제창 띄우는 key -->
                            <!-- <option value="02">앱카드</option> -->
                        </select>
                    </span>
                </td>
            </tr>
<!--             <tr id="taxsave_view">
                <th>
                    현금영수증 발행여부 (계좌이체)
                </th>
                <th>
                    PCD_TAXSAVE_FLAG
                </th>
                <td>
                    <select id="taxsave_flag" name="taxsave_flag">
                        <option value="N">N</option>
                        <option value="Y">Y</option>
                    </select>
                </td>
            </tr> -->
            <tr>
                <th>
                    빌링키(결제창에서 등록한 계좌 or 카드 정보를 암호환 키값 // 값이 있는 경우:고객이 계좌나 카드의 첫 등록 이후 따로 계좌나 카드 정보를 기입하지 않아도 파트너사에서 이 PCD_PAYER_ID로 결제 요청 가능.)
                    빌링키 결제를 한다면 필수값.
                </th>
                <th>
                    PCD_PAYER_ID
                </th>
                <td>
                    <input type="text" name="payer_id" id="payer_id" value="">
                </td>
            </tr>
            <tr>
                <th>
                    결제요청 방식
                </th>
                <th>
                    PCD_PAY_WORK
                </th>
                <td>
                    <select id="pay_work" name="pay_work">
                        <option value="PAY">즉시결제(PAY)</option>
                        <option value="AUTH">빌링키 등록(AUTH)</option>
                        <option value="CERT">결제요청 재컨펌(CERT)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>
                    과세설정
                </th>
                <th>
                    PCD_PAY_ISTAX
                </th>
                <td>
                    <select id="pay_istax" name="pay_istax">
                        <option value="Y" selected>과세</option>
                        <option value="N">비과세</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>
                    부가세 설정
                </th>
                <th>
                    PCD_PAY_TAXTOTAL
                </th>
                <td>
                    <input type="text" name="pay_taxtotal" id="pay_taxtotal" value="">
                </td>
            </tr>
            <tr>
                <th>
                    간편결제 구분
                </th>
                <th>
                    PCD_SIMPLE_FLAG
                </th>
                <td>
                    <select id="simple_flag" name="simple_flag">
                        <option value="N">미사용</option>
                        <option value="Y">사용</option>
                    </select>
                </td>
            </tr>
            <tr id="payer_authtype_view" style="display:none;">
                <th>
                    비밀번호 결제 인증방식
                </th>
                <th>
                    PCD_PAYER_AUTHTYPE
                </th>
                <td>
                    <select name="payer_authtype">
                        <option value="">미사용</option>
                        <option value="pwd">사용</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>
                    결제(요청)결과<br>RETURN URL
                </th>
                <th>
                    PCD_RST_URL
                </th>
                <td>
                    <select name="is_direct">
                        <option value="N">팝업</option>
                        <option value="Y">다이렉트</option>
                    </select>
                </td>
            </tr>
        </table>
    </form>
    <br>
    <button id="orderFormSubmit" style="margin-left: 525px">상품구매</button>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#orderForm").submit();
        });
    </script>
</body>
</html>
